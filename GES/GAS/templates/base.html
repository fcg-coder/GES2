<!DOCTYPE html>
<html>
<head>
    
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
    <title>НАЧАЛЬНАЯ СТРАНИЦА</title>
    <style>
        body{
            display: flex;
            justify-content: center;
        }
        .intro{
            display: flex;
            flex-direction: column;
        }
        .circle {
            width: 200px;
            height: 200px;
            border-radius: 50%; 
            margin: 0 auto;
            margin-top: 50px;
            margin: 10px;
        }
        .red {
            background-color: red;
        }
        .blue {
            background-color: blue;
        }
        .green {
            background-color: green;
        }
        .yellow {
            background-color: yellow;
        }

        
        .footer {

            position:fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: auto;
            background-color: #dcdcdc;
            display: flex;
            align-items: center;
            justify-content: space-around;

            }

        .footer ul{
            font-size: 12px;
            font-family: 'Josefin Sans', sans-serif;
            list-style-type: none;
            display: flex;
        justify-content: space-evenly;
        flex-direction: column;
        height: 100%;
        padding: 0;
        }


        .footer ul li{
            padding: 3px;
        }
        .footer ul a{
          
            color: rgb(86, 86, 86);
            text-decoration: none;
        }
        

    </style>
</head>
<body>

   
    <div class="intro">
        {% for page in pages %}
            <a href="{% url 'map:next_page' idToNewPage=page.id %}">
                <canvas class="canvas"  data-radius="{{ page.size }}">  {{ page.nameOfPage }} </canvas>
            </a>
        {% endfor %}
    </div>

    <script>
        // Получение ссылок на элементы canvas
        var canvases = document.querySelectorAll('.canvas');
      
        // Для каждого канваса
        canvases.forEach(function(canvas) {
          var ctx = canvas.getContext('2d');
          
          // Получение радиуса фигуры из атрибута data-radius
          var radius = parseInt(canvas.getAttribute('data-radius'));
        
          // Установка ширины и высоты канваса на основе радиуса
          canvas.width = radius * window.innerWidth / 2;
          canvas.height = radius * window.innerHeight / 2;
      
          // Рандомизация координат канваса
          canvas.style.position = 'absolute';
          canvas.style.left = Math.floor(Math.random() * (window.innerWidth - canvas.width)) + 'px';
          canvas.style.top = Math.floor(Math.random() * (window.innerHeight - canvas.height)) + 'px';
          
          // Получение названия страницы
          var pageName = canvas.innerHTML.trim();
          
          // Функция для рисования случайной кляксы
          function drawBlob() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        
            // Создание пустого массива точек
            var points = [];
            var color = 'rgba(' + random(256) + ',' + random(256) + ',' + random(256) + ',1)';
            // Генерация случайной позиции и радиуса для кляксы
            var x = canvas.width / 2;
            var y = canvas.height / 2;
            var numPoints = 20 * radius; // количество вершин кляксы
            var startAngle = Math.random() * Math.PI * 2;
            for (var i = 0; i < numPoints; i++) {
              var angle = startAngle + (i / numPoints) * Math.PI * 2;
              var x1 = x + radius * 175  * Math.cos(angle);
              var y1 = y + radius * 175 * Math.sin(angle);
              points.push({ x: x1, y: y1 });
        
              // Рисование эллипса на вершине кляксы
              var ellipseWidth = randomRange(10, 100);
              var ellipseHeight = randomRange(10, 100);
              ctx.beginPath();
              ctx.ellipse(x1, y1, ellipseWidth, ellipseHeight, 0, 0, Math.PI * 2);
              ctx.fillStyle = color;
              ctx.fill();
            }
        
            // Соединение вершин линиями
            ctx.beginPath();
            ctx.fillStyle = color;
            ctx.moveTo(points[0].x, points[0].y);
            for (var i = 1; i < points.length; i++) {
              ctx.lineTo(points[i].x, points[i].y);
            }
            ctx.closePath();
            ctx.fill(); // Заполнение внутренней области кляксы цветом
            
            // Отображение названия страницы на кляксе
            ctx.font = '16px Arial';
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.fillText(pageName, canvas.width / 2, canvas.height / 2);
          }
        
          // Функция для генерации случайного числа в заданном диапазоне
          function random(max) {
            return Math.floor(Math.random() * max);
          }
        
          // Функция для генерации случайного числа в заданном диапазоне
          function randomRange(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
          }
        
          // Рисование кляксы при загрузке страницы
          drawBlob();
        
        });
      </script>
    
      
    
    <div class="footer">
        <ul>INFORMATION
            <li> 
                <a href="{% url 'django.contrib.flatpages.views.flatpage' 'about/' %}">About us</a>
           </li>
            <li> 
               <a href=" {% url 'map:createNewPage' %} ">Create new page</a>
            </li>    
            <li> 
                <a href="{% url 'django.contrib.flatpages.views.flatpage' 'feedback/' %}">Feedback</a>
            </li>
            <li> 
                <a href="http://127.0.0.1:8080/">Unity</a>
            </li>
            <li> 
                <a href="{% url 'django.contrib.flatpages.views.flatpage' 'donation/' %}">Donation</a>
            </li>
        </ul>
        <ul>ALTERNATIVE VIEW
           <li> 
               <a href=" {% url 'map:graph' %} "> 
                Graph
               </a>
           </li>
           <li>
               <a href=" {% url 'map:euler_diagram_view' %} "> 
                   Diagram
               </a>
           </li>    
        </ul>
    </div>
</body>
</html>
